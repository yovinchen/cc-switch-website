# 3.2 Prompts 提示词管理

## 功能说明

Prompts 功能用于管理系统提示词预设。系统提示词会影响 AI 的行为和回复风格。

通过 CC Switch，你可以：

- 创建多个提示词预设
- 快速切换不同场景的提示词
- 跨设备同步提示词配置

## 打开 Prompts 面板

点击顶部导航栏的 **Prompts** 按钮。

## 面板概览

![image-20260108010110382](../assets/image-20260108010110382.png)

## 创建预设

### 操作步骤

1. 点击右上角 **+** 按钮
2. 输入预设名称
3. 在 Markdown 编辑器中编写提示词
4. 点击「保存」

### Markdown 编辑器

编辑器提供：

- 语法高亮
- 实时预览
- 常用格式快捷键

### 提示词编写建议

**结构化格式**：

```markdown
# 角色定义

你是一个专业的代码审查专家。

## 核心能力

- 代码质量分析
- 性能优化建议
- 安全漏洞检测

## 回复风格

- 简洁明了
- 提供具体示例
- 给出改进建议

## 注意事项

- 不要修改业务逻辑
- 保持代码风格一致
```

## 激活预设

### 操作方式

点击预设项的开关按钮，切换启用状态。

### 单一激活

同一时间只能激活一个预设。激活新预设时，之前的预设会自动停用。

### 同步目标

激活后，提示词会写入对应应用的文件：

| 应用 | 文件路径 |
|------|----------|
| Claude | `~/.claude/CLAUDE.md` |
| Codex | `~/.codex/AGENTS.md` |
| Gemini | `~/.gemini/GEMINI.md` |

## 编辑预设

1. 点击预设项的「编辑」按钮
2. 修改名称或内容
3. 点击「保存」

如果编辑的是当前激活的预设，保存后会立即同步到配置文件。

## 删除预设

1. 点击预设项的「删除」按钮
2. 确认删除

如果删除的是当前激活的预设，配置文件中的内容会被清空。

## 智能回填

CC Switch 提供智能回填保护机制，确保你的手动修改不会丢失。

### 工作原理

1. 切换预设前，自动读取当前配置文件内容
2. 比较文件内容与数据库中的预设
3. 如果内容不同，说明用户手动修改过
4. 将手动修改的内容保存到当前预设
5. 然后再切换到新预设

### 保护场景

| 场景 | 处理方式 |
|------|----------|
| CLI 中直接编辑 `CLAUDE.md` | 修改自动保存到当前预设 |
| 外部编辑器修改配置文件 | 修改自动保存到当前预设 |
| 切换到其他预设 | 先保存当前修改，再切换 |

### 技术细节

回填机制在以下时机触发：

- **切换预设时**：保存当前 live 文件内容到当前预设
- **编辑当前预设时**：从 live 文件读取最新内容
- **首次启动时**：自动导入现有 live 文件内容

### 注意事项

- 回填仅在切换到不同预设时触发
- 如果当前没有激活的预设，不会触发回填
- 回填失败不会影响切换流程

## 跨应用使用

Prompts 是按应用分开管理的：

- 切换到 Claude 时，显示 Claude 的预设
- 切换到 Codex 时，显示 Codex 的预设
- 切换到 Gemini 时，显示 Gemini 的预设

如需在多个应用使用相同的提示词，需要分别创建。

## 导入导出

### 通过深度链接分享

可以生成深度链接分享预设：

```
ccswitch://import/prompt?data=<base64编码的预设>
```

### 通过配置导出

导出配置时会包含所有预设，导入后可恢复。
